<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="hojaHistoriaClinica" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="189a3bd9-e85c-4d10-b241-46fe95780ab7">
	<property name="ireport.zoom" value="1.3310000000000004"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="id_paciente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[1]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
/*DATOS DEL PACIENTE*/
initcap(
A.primer_apellido||coalesce(' '||A.segundo_apellido,'')||coalesce(' '||A.apellido_casada,'')) as apellido_paciente,
initcap(A.primer_nombre||coalesce(' '||A.segundo_nombre,'')||coalesce(' '||A.tercer_nombre,'')) as nombre_paciente,
(Select * From fn_calcular_edad($P{id_paciente},'completa')) as edad,
to_char(A.fecha_nacimiento,'DD/MM/YYYY') AS fecha_nacimiento,
B.numero expediente,
C.nombre establecimiento,
D.nombre sexo
FROM  mnt_paciente A
      INNER JOIN mnt_expediente B ON B.id_paciente= A.id
      INNER JOIN ctl_establecimiento C ON C.id= B.id_establecimiento
      INNER JOIN ctl_sexo D ON D.id=A.id_sexo
WHERE B.habilitado=true AND A.id=$P{id_paciente}]]>
	</queryString>
	<field name="apellido_paciente" class="java.lang.String"/>
	<field name="nombre_paciente" class="java.lang.String"/>
	<field name="edad" class="java.lang.String"/>
	<field name="fecha_nacimiento" class="java.lang.String">
		<fieldDescription><![CDATA[Fecha de nacimiento del paciente]]></fieldDescription>
	</field>
	<field name="expediente" class="java.lang.String"/>
	<field name="establecimiento" class="java.lang.String"/>
	<field name="sexo" class="java.lang.String">
		<fieldDescription><![CDATA[Sexo al que aplica el valor normal.
f=femenino
m=masculino
a=ambos]]></fieldDescription>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="48" splitType="Stretch">
			<staticText>
				<reportElement x="67" y="13" width="416" height="12" uuid="5121ec93-b79c-48e3-8994-fb76d9202c62"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Sistema Nacional de Salud]]></text>
			</staticText>
			<staticText>
				<reportElement x="67" y="26" width="416" height="17" uuid="01e5023e-3fb5-4cf1-bc32-d01a260ee084"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="13" isBold="true"/>
				</textElement>
				<text><![CDATA[Hoja de Historia Clínica]]></text>
			</staticText>
			<staticText>
				<reportElement x="67" y="0" width="416" height="14" uuid="a863003d-ddb2-4072-be95-f0499b2699c5"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[República de El Salvador]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="553" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="11" width="156" height="17" uuid="97b9ccbe-1b88-4d26-8ab6-598455760b78"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre del establecimiento:]]></text>
			</staticText>
			<textField>
				<reportElement x="156" y="11" width="416" height="17" uuid="b0b4fcf1-4239-4eda-b800-b381662b55b6"/>
				<textFieldExpression><![CDATA[$F{establecimiento}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="372" y="28" width="100" height="20" uuid="0f2a5bdb-66ad-4f2b-baec-c89f87cec36f"/>
				<text><![CDATA[No. de Expediente:]]></text>
			</staticText>
			<textField>
				<reportElement x="472" y="28" width="100" height="32" uuid="bdbc74cb-1537-4618-ba64-64084d2c6d20"/>
				<textElement>
					<font size="18" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{expediente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="60" width="67" height="20" uuid="e8c8637d-7326-4686-bfc3-52b494d82c94"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombres:]]></text>
			</staticText>
			<textField>
				<reportElement x="67" y="60" width="405" height="20" uuid="b0a15e77-991e-4606-b839-a9ca99f1234b"/>
				<textElement>
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre_paciente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="67" y="80" width="405" height="20" uuid="1adc71b1-37a1-4dda-ab71-fbdc20e75868"/>
				<textElement>
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{apellido_paciente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="80" width="67" height="20" uuid="fde37dfd-da7f-4a35-919c-d59327d44e55"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Apellidos:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="100" width="41" height="20" uuid="b682cab1-43e5-48ed-a445-34d85b67153d"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Sexo:]]></text>
			</staticText>
			<textField>
				<reportElement x="41" y="100" width="100" height="20" uuid="9a90fb5c-78fa-4f28-be24-55af21639b3b"/>
				<textElement>
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sexo}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="198" y="100" width="36" height="20" uuid="7111769d-640e-40e1-a4da-df89b7c942fe"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Edad:]]></text>
			</staticText>
			<textField>
				<reportElement x="234" y="100" width="238" height="20" uuid="f5526433-061c-41b2-866f-6a3c95cdbdb4"/>
				<textFieldExpression><![CDATA[$F{edad}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
